<div pTooltip="Test" appendTo="shoppingCart"></div>

<div class="">
  <p-carousel
    [value]="productsToDisplay"
    [numVisible]="5"
    [numScroll]="5"
    [circular]="true"
    autoPlayInterval="3000"
  >
    <!-- [responsiveOptions]="responsiveOptions" -->
    <ng-template let-product pTemplate="item">
      <div
        class="border-1 surface-border border-round m-2 text-center productCard grid"
      >
        <div class="mb-3 w-full relative overflow-hidden">
          <!-- *ngIf="product.soldPieces && product.soldPieces > 100" -->
          <p-tag
            *ngIf="product.price && product.price < 200"
            severity="primary"
            value="Most selled"
            class="absolute mostSelledPosition"
          ></p-tag>
          <p-tag
            severity="danger"
            value="Limited offer"
            class="absolute limitedOfferPosition"
          ></p-tag>
          <p-tag
            severity="danger"
            [value]="'-' + product.discount.toFixed(0) + '%'"
            class="absolute discountApplied"
          >
          </p-tag>
          <img
            [src]="product.photos[0]"
            [alt]="product.name"
            class="w-full h-12rem max-h-full shadow-2 productImage"
          />
        </div>
        <div class="col-12">
          <h4 class="mb-1 mt-0 productName" [title]="product.name">
            {{
              product.name.length > 15
                ? product.name.slice(0, 12) + "..."
                : product.name
            }}
          </h4>

          <h5
            class="mt-0 mb-3 flex flex-column justify-content-center align-content-center"
          >
            <span [ngClass]="{ oldPrice: product.discount !== 0 }">
              {{ "$" + product.price }} </span
            ><span *ngIf="product.discount !== 0" class="discountedPrice">
              {{
                "$" +
                  (
                    product.price -
                    (product.price * product.discount) / 100
                  ).toFixed(0)
              }}</span
            >
          </h5>

          <p-tag
            [value]="
              product.stock > 50
                ? 'In stock'
                : product.stock <= 50 && product.stock > 10
                ? 'Limited stock'
                : product.stock <= 10 && product.stock > 1
                ? 'Last ' + product.stock + ' pieces'
                : product.stock === 1
                ? 'Last piece available'
                : 'Out of stock'
            "
            [severity]="
              product.stock > 50
                ? 'success'
                : product.stock <= 50 && product.stock > 10
                ? 'warning'
                : product.stock <= 10 && product.stock > 1
                ? 'warning'
                : product.stock === 1
                ? 'danger'
                : 'danger'
            "
          ></p-tag>

          <div class="card flex justify-content-center my-3">
            <p-rating
              [(ngModel)]="product.rating"
              [readonly]="true"
              [cancel]="false"
            ></p-rating>
          </div>

          <div class="car-buttons mb-2">
            <p-button
              (onClick)="addToCart(product)"
              type="button"
              styleClass="p-button-lg p-button-rounded mr-2"
              icon="pi pi-cart-plus"
            ></p-button>
            <p-button
              onclick="addToFavorite(product)"
              type="button"
              styleClass="p-button-success p-button-rounded mr-2"
              icon="pi pi-star"
            ></p-button>
          </div>
        </div>
      </div>
    </ng-template>
  </p-carousel>
</div>
